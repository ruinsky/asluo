<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
	<meta name="renderer" content="webkit">
	<title>星夜</title>
	<link href="css/index.css" rel="stylesheet" type="text/css" />
	<!--[if lte IE 8]>
	<style type="text/css">
		html,body{width:100%; height:100%; overflow:scroll}
		.section-btn{display:none;}
	</style>
	<![endif]-->
</head>
<body>
	<div id="nav">
		<ul>
			<li><a href="http://asluo.com/wp/" target="_blank">Note</a></li>
			<li class="music"><audio autoplay loop id="ssn"><source src="img/ssn_128k.mp4" ><source src="img/ssn_128k.mp3" >您的浏览器不支持背景乐</audio><a href="#">starry starry night</a></li>
	</div>
	<section class="section-wrap">
		<div class="section section-1">
			<div class="title active">
				<p class="tit">星光灿烂的夜晚</p>
				<p class="con">往后几年的时光，我的脑海里不断浮起那个星光灿烂的夜晚。当我睁开疲倦的眼，准备抱起你，却被眼前灯光下的小脚丫打动，久久不肯睡去……</p>
				<p class="date">2014/1/17 22:17</p>
			</div>
		</div>
		<div class="section section-2">
			<div class="title">
				<p class="tit">你半睁了眼，朦胧中可看到了未来</p>
				<p class="con">迎接你回家，我心里是忐忑的，想看看你裏在被子里的脸，却又不知该如何抱你才显不那么生疏，大多数时间你在沉睡，只是中午阳光正盛时，半睁了一只眼，瞳孔里雾水一片，我知道你还看不清我们，但是，朦胧中你可看到了未来？</p>
				<p class="date">2014/1/18 11:25</p>
			</div>
		</div>
		<div class="section section-3">
			<div class="title">
				<p class="tit">回忆永远幸福的夜</p>
				<p class="con">艰苦的日子里，仿佛只有夜晚才能发散出温馨的气味，你已经养成了半夜吃奶的习惯，吃完的你安静睡去，嘴角的奶香仿佛有无尽的魔力，吸引着我，靠近着你...</p>
				<p class="date">2014/4/16 22:09</p>
			</div>
		</div>
		<div class="section section-4">
			<div class="title">
				<p class="tit">在你的梦里，是否会有我出现</p>
				<p class="con">你不在我身边的那些日子里，我面前经常浮现起你的脸，时而凝望，时而大笑，时而尖叫，但多数都是在哭泣。面对着哭泣的你，我总忍不住想把你抱起，日复一日，年复一年，终究有一天，我会抱不动你，当你奔跑在风里，亦当你沉醉在梦里，不知可有我在那里...</p>
			</div>
		</div>
		<div class="section section-5">
			<div class="title">
				<p class="tit">手推车是你最爱的周岁玩具</p>
				<p class="con">我想我永远也忘不了你周岁时玩手推车时的情景：你推着车，就像哥伦布一样，发现了客厅，发现了厨房，发现了卫生间，发现了卧室，最后你停留在电视机前，这是另外一块新大陆，所以当姥姥赶你去餐桌时，你发了脾气，让人忍俊不禁</p>
			</div>
		</div>
		<div class="section section-6">
			<div class="title">
				<p class="tit">你爱的是整个世界的新奇</p>
				<p class="con">我犹记得，我有一张小时候的照片，在一个立有巨大熊猫的广场前举着飞机，所以我也想给你拍一些对比，拍完后才发觉自己最喜欢你这张背影，相比于我的相机，你更喜欢这个世界的新奇...</p>
			</div>
		</div>
		<div class="section section-7">
			<div class="title">
				<p class="tit">好想念安静的你</p>
				<p class="con">小时候，你是安静的，小心的，不会大吵大闹，只会用眼睛看着一切新奇的事情</p>
			</div>
		</div>
		<div class="section section-8">
			<div class="title">
				<p class="tit">那些忘不了的旧地</p>
				<p class="con">昔日的超市，已经大变了模样，但是我仍然无比怀念，那个曾经有你身影的旧地。</p>
			</div>
		</div>
		<div class="section section-9">
			<div class="title">
				<p class="tit">动物园的记忆</p>
				<p class="con">咦，这儿有个姐姐在哭……</p>
			</div>
		</div>
		<div class="section section-10">
			<div class="title">
				<p class="tit">吃是永远的话题</p>
				<p class="con">当你用眼睛探索过周围的一切后，接下来就是用你的嘴巴来继续这个话题。我犹记得你第一次吃辅食的样子，你还不会吞咽，但是吃的样子极为认真。时光逝去，吃的东西终于从书本、玩具、奶嘴变成了真正的食物。在我的影响下，你极其喜欢重口味的食物，虽然为此没少受你妈妈的抱怨，但是我真的很开心，开心你能体验这个世界的美味。日后回想于此，最令人忍俊不禁的是，你吃鸭脖的时候，明明辣到哭却依然不肯放手……</p>
			</div>
		</div>
		<div class="section section-11">
			<div class="title">
				<p class="tit">永远活在阳光下</p>
				<p class="con">这个世界有太多的污秽，我想等你再稍大一点，慢慢告诉你，不是为了让你好奇，而是想让你远离……</p>
			</div>
		</div>
		<div class="section section-12">
			<div class="title">
				<p class="tit">儿童公园游记</p>
				<p class="con">时间是个很奇妙的东西，你一岁半我们推着婴儿车带你来过这里，等你3岁半再来，这里已经从荒芜变成了景地。同样的地点和同样的人，仅仅两年时间，就已经让我们感觉到自己正在慢慢老去……</p>
			</div>
		</div>
		<div class="section section-13">
			<div class="title">
				<p class="tit">当记忆变的模糊</p>
				<p class="con">关于你的记忆，会慢慢像这张照片一样变得模糊。等到你褪尽孩子气时，我不知道我是否还会怀念此时的你……</p>
			</div>
		</div>
		<div class="section section-last">
			<div class="title">
				<p class="tit">未来？</p>
				<p class="con">未来，已为你而来；回忆，已随我而去……</p>
			</div>
		</div>
	</section>
	<ul class="section-btn">
	  <li class="on"></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	  <li></li>
	</ul>
	<div class="arrow">&laquo;</div>

<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript">
	//此处引用：鼠标滚轮mousewheel插件
	!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a:a(jQuery)}(function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if(b=a.event.fix(g),b.type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(m=-1*g.deltaY,j=m),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||f>n)&&(f=n,d(g,n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[j>=1?"floor":"ceil"](j/f),l=Math[l>=1?"floor":"ceil"](l/f),m=Math[m>=1?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120===0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})});
	
	$(function(){
		var i=0;
		var $btn = $('.section-btn li'),
			$wrap = $('.section-wrap'),
			$arrow = $('.arrow');
		
		/*当前页面赋值*/
		function up(){i++;if(i==$btn.length){i=0};}
		function down(){i--;if(i<0){i=$btn.length-1};}
		
		/*页面滑动*/
		function run(){
			$btn.eq(i).addClass('on').siblings().removeClass('on');	
			$wrap.attr("class","section-wrap").addClass(function() { return "put-section-"+i; }).find('.section').eq(i).find('.title').addClass('active');
		};
		
		/*右侧按钮点击*/
		$btn.each(function(index) {
			$(this).click(function(){
				i=index;
				run();
			})
		});
		
		/*翻页按钮点击*/
		$arrow.one('click',go);
		function go(){
			up();run();	
			setTimeout(function(){$arrow.one('click',go)},1000)
		};
		
		/*响应鼠标*/
		$wrap.one('mousewheel',mouse_);
		function mouse_(event){
			if(event.deltaY<0) {up()}
			else{down()}
			run();
			setTimeout(function(){$wrap.one('mousewheel',mouse_)},1000)
		};
		
		/*响应键盘上下键*/
		$(document).one('keydown',k);
		function k(event){
			var e=event||window.event;
			var key=e.keyCode||e.which||e.charCode;
			switch(key)	{
				case 38: down();run();	
				break;
				case 40: up();run();	
				break;
			};
			setTimeout(function(){$(document).one('keydown',k)},1000);
		}
		//响应触摸滑动
		$("body").on("touchstart", function(e) {
			e.preventDefault();
			//startX = e.originalEvent.changedTouches[0].pageX,
			startY = e.originalEvent.changedTouches[0].pageY;
		});
		$("body").on("touchend", function(e) {
			e.preventDefault();
			//moveEndX = e.originalEvent.changedTouches[0].pageX,
			moveEndY = e.originalEvent.changedTouches[0].pageY,
			//X = moveEndX - startX,
			Y = moveEndY - startY;
			if ( Y > 0) {
				down();run();//alert(i);
			}else if (Y < 0 ) {
				up();run();//alert(i);
			}
		});
	});

document.body.addEventListener('touchmove', function (e) {
	e.preventDefault(); //阻止默认的处理方式(阻止下拉滑动的效果)
}, {passive: false}); //passive 参数不能省略，用来兼容ios和android

	// 音乐播放
function autoPlayMusic() {
    // 自动播放音乐效果，解决浏览器或者APP自动播放问题
    function musicInBrowserHandler() {
        musicPlay(true);
        document.body.removeEventListener('touchstart', musicInBrowserHandler);
    }
    document.body.addEventListener('touchstart', musicInBrowserHandler);

    // 自动播放音乐效果，解决微信自动播放问题
    function musicInWeixinHandler() {
        musicPlay(true);
        document.addEventListener("WeixinJSBridgeReady", function () {
            musicPlay(true);
        }, false);
        document.removeEventListener('DOMContentLoaded', musicInWeixinHandler);
    }
    document.addEventListener('DOMContentLoaded', musicInWeixinHandler);
}
function musicPlay(isPlay) {
    var audio = document.getElementById('ssn');
    if (isPlay && audio.paused) {
        audio.play();
    }
    if (!isPlay && !audio.paused) {
        audio.pause();
    }
}
autoPlayMusic();

//chrome点击播放
function toggleSound() {
            var music = document.getElementById("ssn");//获取ID  
                console.log(music);
                console.log(music.paused);
            if (music.paused) { //判读是否播放  
                music.paused=false;
                music.play(); //没有就播放 
            }  
            
        }
setInterval("toggleSound()",1);
</script>
</body>
</html>